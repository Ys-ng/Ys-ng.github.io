---
layout: post
title: 이더리움 (ethereum)
subtitle: blockchain ethereum
categories: BlockChain
tags: [ethereum, blockchain]
---




## 이더리움이란

* 프로그래밍한 대로 정확히 작동하는 스마트 컨트랙트를 작동시키는 탈중앙화된 플랫폼
* 블록체인 내부의 이더리움 가상머신 운영체제와 스마트 컨트랙트 개발언어, 이를 작동하고 관리하기위한 다양한 서비스를 제공


로드맵(2017년 이더리움재단에서 제시)
1단계 프런티어 : 






### 스마트 컨트랙스
* 1996년 닉 스자보(Nick Szabo)의 논문에 의해 처음으로 개념화
* 넓은 의미의 스마트 계약
 -> 여떠한 다운타임, 검열, 사기행위, 제3자간섭없이 프로그래밍된 대로 정확히 **실행**되는 프로그램
* 블록체인의 스마트 계약
* 솔리디티, LLL, Serpent를 비롯한 여러가지 언어로 작성가능

**장점**
* 거래상대를 신뢰하지않아도 거래에 문제가 발생하지 않는다
* 중재자가 필요없으므로 비용을 절감할수있다



## Account
* 모든 트랜잭션의 실행 주체이자 기본단위
* 모든 것은 어카운트에서 시작

**EOA** (Externally Owned Account: 외부소유계정)
* 사용자가 사용하는 계정
* 사용자가 자신의 개인키로 관리
* 개인키를 사용하여 전자서명된 트랜잭션을 생성하고 실행함으로써 메세지를 전송
* 이더를 송금하거나 계약을 실행할수있음
* 스마트 컨트랙트 실행 코드를 가지지 않음

**CA** (Contract Account: 계약계정)
* 스마트 컨트랙트
* 스마트 컨트랙트를 블록체인에 배포할떄 만들어지는 계정
* 개인키는 없음
* 다른 CA나 EOA로부터 메시지를 수신해 코드를 실행하고 메시지를 보낼수있음


책추천: 코어 이더리움 프로그래밍 /박재현
영어 원문: https://github.com/ethereumbook/ethereumbook

```go
// go-ethereum
tyep Account struct{
	Nonce uin64    //해당계정으로부터 보내진 트랜잭션 수
		        //EOA에서는 거래를, CA에서는 계약에서 계약을 생성할때마다 1씩 증가
	Balance *big.Int //해당계정의 이더 잔고 (단위:Wei)
	Root common.Hash//해당계정이 저장될 스토리지의 머클 패트리시아 트리의 루트노드
	CodeHash []byte //해당계정의 스마트 컨트랙트 바이트 코드의 해시 (nil인경우 EOA를 의미)
}
```

### 트랜잭션
* 다른어카운트로 보낼 데이터 구조체로 전자서명으로 암호화
* 트랜잭션의 발신자는 ECDSA 서명 알고리즘을 사용하여 자신의 개인키로 서명

이더리움 트랜잭션 유형
* 하나의 어카운트에서 다른 어카운트로 이더를 전송할떄
** from EOA ...




### Receipt
**트랜젝션의 실행과정에 대한 모든 기록**
* 트랜잭션과 관련된 실행환경과 검색을 위한 인덱싱 등 블록 내에 정상 등록된 모든 트랜잭션에 대한 정보들이 저장

리시트 구조
```go
type Receipt struct{
	PostState []byte //트랜잭션 처리후 상태정보
	Status uint

}

``


### Block
**이더리움에서 블록은 블록헤더, 엉클블록, 트랜잭션, 마이닝작업의 난이도로 구성
https://etherscan.io/block/5491846           <- 5491846번 블록정보




### Genesis Block
**제네시스 블록**
* 블록체인에서 첫번쨰에 위치한 최초 블록
* 블록넘버가 0으로 이전블록이 없음
* 어떤 트랜잭션도 포함하고있지 않음
* 동일한 제너시스 블록을 갖고있는 이더리움 클라이언트만 


**jenesis.json**
* 블록체인의 Genesis 블록 (0번째블록)의 정보가 저장된 JSON 형식의 텍스트 파일
* 프라이빅 이더리움 네트워크 구축시 사용

config: 제너시스 블록의 설정값을 정의
chainId: 블록체인을 식별하는 값
homesteadBlock



### Uncle Block
**엉클블록**(Uncle Block)
* 블록생성에 성공하였고 검증에 오류가 없어서 이더리움 네트워크를 통해 다른노드레 브로드캐스팅은 되었으나 다른 마이너가 생성한 다른 블록에 비해 난이도가 낮아 블록체인에는 등록되지 못한 블록
* 비트코인의 스테일블록(stale block), 고아블록(orphan block)

**엉클블록이 많아질경우 문제점**
* 엉클블록 내에 트랜잭션은 즉시 처리되지 않음 -> 트랜잭션 처리 지연
* 엉클블록뒤에 연결된 블록들은 불필요한 해시 계산을 위해 컴퓨팅 파워를 사용 -> 컴퓨팅 파워 낭비
* 엉클블록 생성후 다음 블록을 생성하면 평균블록 생성시간이 길어지므로 난이도가 감소 -> 컴퓨팅 파워가 큰 마이너의 영향력이 커지는 보안문제가 발생


### GHOST
Greedy Heaciest Observed SubTree
**Ghost 프로토콜**
* 비트코인의 성능 및 보안성 향상을 위해 나온 알고리즘
* 성능과 보안성은 스테일 블록 생성 확률에 반비례
* 비트코인
 * 길이가 더 긴 블록을 메인 체인으로 채택하고 스테일 블록을 제거
 * 블록 생성주기(10분)가 길어서 스테일 블록 생성 확률이 낮음















