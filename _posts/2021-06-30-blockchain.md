---
layout: post
title: 블록체인이란
subtitle: blockchain
categories: BlockChain
tags: [blockchain]
---



## 비트코인이란?

탄생 배경
서브프라임 모지기 사태 및  월스트리트 점령시위
무정부주의 및 사이버펑크 운동
컴퓨터 공학및 암호학적 발전
사토시 나카모토 비트코인 백서(2008.11.1)

비트코인
중앙기관없이 네트워크 참가자간 p2p방식으로 발행, 유통되는 전자화폐
2140까지 2100만개로 한정된 발행량을 지닌 지플레이션 화폐
모든 비트코인 거래 내역은 블록체인이라 불리는 공개분산장부에 기록
위변조 불가능한 공개분산장부를 통해 신뢰하지않는 주체간 안전하고 효율적인 거래가 가능

A qurely peer-to-peer version of electronic cash would allow online...
전자화폐를 순수 P2P로 만들수 있다면 금융기관의 개입없이 사용자끼리 직접 온라인으로 지불할수 있게된다.
사토시 나카모토




### p2p로 교환가능한 전자화폐 구현시 고려사항

악의적인 참가자에의한 부정, 위변조
누구나 참가할수있는 네트워크에서는 의도적으로 부정한 거래를 말들거나 거래결과를 자신에게 유리하게 변경하는 악의적인 참가자가 존재할수 있다
* 참가자의 본인인증과 부인방지(참가자의 개인키를 이용한 전자서명)
* 악의적인 참가자에 의한 부정 방지(네트워크 참가자 전원이 모든거래이력을 기록한 장부를 공유)
* 거래내역 위변조 방지 (거래 내역을 담은 블록을 생성할떄 이전블록의 해쉬를 포함)
* 블록 전체에 대한 위변조 방지 (새로운 블록을 만들떄 계산량이 큰 문제를 풀도록 함)

정보전달의 지연으로 인한 불일치
실행된 거래의 결과가 늦게 전달, 공유되어 이중지불과 같은 불일치 상태가 발생할수있다



네트워크를 자율적으로 유지, 운영하기위한 추진력
누구나 참가할수 있는 네트워크에 책임있는 관리자가 없으면 시스템 품질(복원성, 가용성)을 유지하면서 운영하지 못할수 있다





### 거래
1. 한사용자가 다른사용자 계좌로 송금주문을 넣음
2. 해당 주문은 채굴되기 전 네트워크에서 대기

### 채굴
3. 주문들은 헤더와 함께 블록화되어 채굴자에게 전달
4. 블록의 해쉬값을 먼저 찾기위해 경쟁
5. 해쉬값을 가장 먼저 찾은 채굴자는 새로운 비트코인을 얻음
6. 채굴자들이 찾은 해쉬값은 그다음 주문의 블록에 들어가서 블록체인을 형성


한국은행
* 분산 원장(Distributed Ledger) 기술
* 거래정보를 기록한 원장을 특정 기관의 중앙서버가 아닌 P2P 네트워크에 분산하여 참가자가 공동으로 기록하고 관리하는 기술

금융위원회/ 금융감독원
* 블록체인이란 거래 데이터를 중앙집중형 서버에 기록, 보관하는 기존 방식과 달리 거래 참가자 모두에세 내용을 공유하는 분산형 디지털 장부를 의미

금융결제원
* 블록체인이란 분산된 네트워크의 컴퓨팅 자원을 모아 거대한 연산 능력을 확보하고, 이를 기반으로 중앙서버 없이 모두 작업을 처리하고 검증하는 기술



기술적 측면
* 블록체인은 공개적으로 열람 가능한 분산 원장을 유지하는 백엔드 데이터베이스
비즈니스 측면
* 블록체인은 중개자 없이도 개인(peer)간의 거래, 가치, 자산 등을 이동시킬수있는 교환 네트원크(exchange network)
법적 관념
* 블록체인은 거래를 검증해주므로 종전의 신뢰 보증 기관을 대체하는 수단
출처: william mougayar .2016




### 블록체인 기술의 장점

보안성 향상
* 중앙 데이터베이스 한곳에 모든 자료를 저장하는것보다 데이터 손실에 대한 위험이 낮음
* 중앙 집중화된 시스템 관리가 필요하지 않으므로, 내부자에 의한 조작 또는 정보유출 위험이 크게 감소
* 암호화된 데이터와 암호화된 키 값으로만 거래가 이루어지므로 보안성을 높일수 있음
* 새로운 블록은 기존의 블록과 연결되므로 전체 블록 안의 데이터 변조와 탈취가 불가능
* 각 참여 노드의 분산화로 해킹이 불가능

안정성 향상
*  일부 시스템에 오류 또는 성능 저하가 발생하더라도 전체 시스템과 네트워크에 영향을 미치지 않음

거래속도 향상
* 거래의 인증, 증명 관정에서 제3자를 베제시키는 실시간 거래가 이루어지므로 거래 기록의 신뢰성 확보와 동시에 거래의 효율성 및 속도가 향상됨
* 분산원장 기술로 실수를 최소화 시킬수 있으므로 오류의 장정과 수정을 위한 시간이 줄어듦

비용감소
* 중앙 집중화된 시스템이 필요없기 떄문에 비용이 적게듦
* 참여자간 직접거래로 중개 수수료를 절감

거래 투명성 향상
* 모든 참여자들이 거래 장부를 공유하고, 거래장부에 접근이 가능
* 네트워크 참여자의 실시간 모니터링이 가능



### 블록체인 분류

**Public Blockchain**

**Private Blockchain**
* Permissioned
* 단일 조직에서 운영
* 읽기, 쓰기, 합의 과정에 참여할수있는 참여자가 미리 지정
* 중앙기관 한 곳이모든 권한을 가지며, 네트워크에참여하기위해서는 해당 중앙기관의 허가가 필요
* 예: 은행간 지급 결제 네트워크


**Consortium Blockchain**(반중앙형 블록체인)
* 여러 조직에서 운영
* 여러 기관들의 컨소시움으로 구성하는 블록체인
* 미리 선정된 노드에 의해서 컨트롤 되는 반 중앙형 블록체인
* 미리 선정된 노드들이 권한을 가지며, 노드의 동의가 일어나야 거래가 생겅
* 예: 공급망을 주로 엔터프라이즈 영역에 적용


장점
* 분산형 구조를 유지하면서 제한된 참여를 통해 보안 강화
* 네트워크 확장이 용이하고 거래 속도가 빠름





## 핵심기술

블록
* 유효한 트랜잭션 정보의 묶음
* 비트코인 블록 하나에 포함된 트랜잭션 개수 : 평균 1,400개
* 비트코인 블록 하나의 크기: 평균 1.14MB
* 블록 높이 : 제너시스 블록[0] 이후 블록이 추가될떄마다 1씩 증가
* 블록 깊이(=confirm) : 블록[1]이 만들어진 후 새로운 블록이 추가될때마다 1씩 증가

 블록헤더 / 블록바디

블록헤더
버전: 데이터 구저의 버전
이전블록 헤더헤쉬: 블록의 체인구조에서 이전 블록(부모블록)에 대한 해쉬 참조값
머클루트: 해당블록에 포함된 거래로부터 생성된 머클트리의 루트에 대한 해쉬(블록에 들어있는 모든 거래의 요약본)
타임스탬프: 블록의 생성 시간
난이도 목표: Bit 값으로 블록의 작업증명 알고리즘에 대한 난이도 목표
난스(nonce): 작업증명 알고리즘에 사용되는 카운터

블록바디
트랜잭션 카운트: 블록에 포함한 트랜잭션 개수 (1-9 byte)
코인베이스트랜잭션: 블록생성시 발생되는 비트코인. 해당블록을 마이닝한 미이너의 수입
트랜잭션: 10분동안 수집한 트랜잭션 정보





트랜잭션
* 비트코인의 거래내역
* 거래 후 남은 잔액이 비트코인이므로, 비트코인의 거래 내역을 기록한 트랜잭션이 곧 비트코인이 된다

코인베이스 트랜잭션
* 블록을 채굴한 사람에게 보상금을 지급해주는 트랜잭션
* 이전 줄력[지급]이 존재하지 않음
* 100 확인 [confirmation] 이전에는 사용할수 없도록 제한

일반 트랜잭션
* 코인베이스 트랜잭션을 제외한 모든 트랜잭션



### nonce
* 블록헤더중 유일하게 변경할수있는 정보
* 0부터 시작해서 작업증명이 완료될때까지 1씩 증가
* 오버플로우가 발생하면 새로운 트랜잭션을 추가해서 재시도

### difficulty
* 출력된 해쉬값이 가지는 0배열의 개수
* 2016개 블록이 생성될때마다 블록 생성 시간을 측적해 난이도를 조절 -> 10분당 1~2개의 블록이 생성되는 것을 보장
* 네트워크의 모든 노드가 동시에 블록을 만들수 없게 하는것




### 머클트리(Merkle Tree)
* 1979년 랄프머클에 의해 개발된 이진 해쉬 트리 구조
* 리프 노드를 두개씩 짝지어서 해시값을 만들고 이렇게 만들어진 해시값을 또 다시 두개씩 짝지어 반복적으로 해시값을 생성 (리프노드의 개수가 홀수라면 마지막리프노드를 복사해서 짝수로 만듬)
* 규모가 큰 데이터 집합의 완전성을 효율적으로 요약, 검증하는데 사용
* **머클루트만으로 트랜잭션의 유효성을 보장**






### 합의
* 모든참여자의 원장이 일치하는지 확인하는 매커니즘

중앙 집중형(=신뢰기반)에서의 합의 -> 서비스 제공자가 원장을 관리
* 빠른 서비스 제공이 가능
* 중앙기관의 의도 또는 악의적인 사용자의 공격을 통해 기록 조작이 가능

분산환경(=증명기반)에서의 합의
* 비잔틴 장군 문제 해결을 통해 신뢰도 있는 서비스를 제공하는것
* 거래및 거래 실행순서에 대한 동의
* 동일한 원장을 유지하기 위하여 검증 참여자들의 상태를 동기화
* 악의적인 참여자 노드들은 격리



합의 알고리즘
* 비잔틴 장군 문제를 해결함으로써 네트워크에 악의적인 노드가 존재하더라도 **신뢰도 있는 시스템 제공을 보장**

작업증명(PoW)
* 1993년 신시아 도크와 모니 나오에 의해 제안된 개념 - 서비스 거부 공격이나 스팸등으로 서비스가 남용되는것을 방지하기위해 만들어진 기법으로 서비스를 신청하는 자에세 작지 않으면서도 처리가능한 수준의 과제를 요구 (예: CAPTCHA)
* 1999년 마르커스 야콥슨과 아리쥬얼이 쓴 논문에서 처음으로 등장
* 사토시 나카모토가 처음으로 제안한 비잔틴 합의 알고리즘 -> 난스를 찾는 과정
* 작업(계산) 능력에 의해 채굴능력(확률)이 결정
* 느린속도와 낭비되는 애너지 문제가 심각

지분증명(PoS)
* 가상화폐 PeerCoin에서 처음으로 발표한 합의 알고리즘
* 지분과 지분이 생성된 날짜에 의해 채굴능력(확률)이 결정
* 작업증명 알고리즘의 애너지 낭비 문제를 해결
* 다양한 알고리즘이 존재


### 보상
새로운 블록을 블록체인에 추가해 블록에 포함된 모든 거래를 유효한 거래로 확정시켜준 대가
비트코인에서의 보상은 새로 발행되는 비트코인과 해당블록에 포함되는 거래의 거래 수수료의 합

비트코인의 새로운 발행
* 채굴자가 블록을 처음 구성할떄 채굴자의 지갑으로 일정량의 비트코인이 입금되는 거래를 그 블록의 첫 거래(generation transaction)로 추가하는 방식
* 새로 발행되는 비트코인은 최초의 50BTC에서 시작해서 블록체인에 21만개의 블록이 추가될때마다 절반으로 줄어듬


?



## 네트워크





geth (go etherium)



-----








